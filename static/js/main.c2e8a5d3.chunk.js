(window["webpackJsonppathfinding-demos"]=window["webpackJsonppathfinding-demos"]||[]).push([[0],{13:function(t,e,a){t.exports=a(23)},18:function(t,e,a){},20:function(t,e,a){},21:function(t,e,a){},22:function(t,e,a){},23:function(t,e,a){"use strict";a.r(e);var n,r,i=a(0),s=a.n(i),o=a(11),u=a.n(o),c=(a(18),a(9)),h=a(8),d=a.n(h),l=a(12),p=a(3),v=a(1),g=a(2),m=a(5),f=a(4),A=a(6);a(20);!function(t){t[t.OPEN=1]="OPEN",t[t.WALL=2]="WALL",t[t.START=3]="START",t[t.END=4]="END",t[t.PATH=5]="PATH",t[t.EXPLORED=6]="EXPLORED",t[t.EXPLORING=7]="EXPLORING"}(n||(n={})),function(t){t[t.DIJKSTRA=1]="DIJKSTRA",t[t.ASTAR=2]="ASTAR",t[t.ASTAR_GREEDY=3]="ASTAR_GREEDY",t[t.ASTAR_DUAL=4]="ASTAR_DUAL"}(r||(r={}));var E=function(t){var e=t.row,a=t.column,r=t.weight,i=t.index,o=t.status,u=t.displayWeight,c=t.onChange,h=t.onMouseEnterGridItem,d=t.onMouseDownGridItem,l=t.onMouseUpGridItem,p=t.onTouchMove,v=t.onTouchEnd;return s.a.createElement("div",{className:function(t,e){var a="grid__item";switch(t){case n.START:return a+" grid__item--start";case n.END:return a+" grid__item--end";case n.EXPLORED:return a+" grid__item--explored";case n.EXPLORING:return a+" grid__item--exploring";case n.PATH:return a+" grid__item--path";case n.WALL:return a+" grid__item--wall";default:return a}}(o),onMouseEnter:h(i),onMouseDown:d(i),onMouseUp:l(i),onTouchMove:p,onTouchEnd:v,"data-index":i},s.a.createElement("p",{className:"item__index"},"i:",i),u&&s.a.createElement("div",{className:"item__data"},s.a.createElement("label",{htmlFor:"weight-input"},"W:"),s.a.createElement("input",{id:"weight-input",className:"item__input",type:"number",value:r,onChange:c(i),min:0})),s.a.createElement("p",{className:"item__coords"},"(",a+","+e,")"))},S=(a(21),a(7)),w=function(){function t(e){Object(v.a)(this,t),this.nodes=void 0,this.start=void 0,this.end=void 0,this.rows=void 0,this.columns=void 0,this.path=void 0,this.pathNodeArray=void 0,this.pathStepArray=void 0,this.pathStepCurrent=void 0,this.nodes=e.nodes,this.rows=e.rows,this.columns=e.columns,this.start=e.start,this.end=e.end,this.path=[],this.pathNodeArray=[],this.pathStepArray=[[]],this.pathStepCurrent=0}return Object(g.a)(t,[{key:"createNodeArray",value:function(t){return t.map((function(t,e){return{i:e,distance:0,weight:t,prevNode:void 0}}))}},{key:"getNodeNeighbours",value:function(t){var e=this.rows,a=this.columns,n=[],r=Math.floor(t/a),i=t-r*a;return i-1>=0&&n.push(t-1),i+1<a&&n.push(t+1),r-1>=0&&n.push(t-a),r+1<e&&n.push(t+a),n}},{key:"buildPathArray",value:function(t){for(var e=[],a=t[this.end];void 0!==a.prevNode;)e.push(a.i),a=t[a.prevNode];return e.push(a.i),e.reverse(),this.path=e,this.pathStepCurrent=0,e}},{key:"getNextPathStep",value:function(){return this.pathStepArray[this.pathStepCurrent+1]?(this.pathStepCurrent+=1,this.pathStepArray[this.pathStepCurrent]):this.pathStepArray[this.pathStepCurrent]}}]),t}(),N=function(t){function e(){var t,a;Object(v.a)(this,e);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(m.a)(this,(t=Object(f.a)(e)).call.apply(t,[this].concat(r)))).calcPath=function(){var t=Object(S.a)(a),e=t.start,n=t.end,r=t.nodes,i=a.createNodeArray(r),s=[];i.forEach((function(t,a){t.distance=e===a?0:1/0,s.push(a)}));for(var o=i[e],u=function(){var t=a.getNodeNeighbours(o.i),e=o.distance,r=o.i;if(t.forEach((function(t){if(s.includes(t)&&0!==i[t].weight){var a=i[t].weight+e;i[t].distance>a&&(i[t].distance=a,i[t].prevNode=r)}})),s.splice(s.indexOf(o.i),1),!s.includes(n))return a.pathNodeArray=i,{v:a.buildPathArray(i)};var u=n;return s.forEach((function(t){i[t].distance<i[u].distance&&(u=t)})),o=i[u],a.buildCurrentStep(i,s,o),o.distance===1/0?{v:[]}:void 0};s.length>0;){var c=u();if("object"===typeof c)return c.v}return[]},a}return Object(A.a)(e,t),Object(g.a)(e,[{key:"buildCurrentStep",value:function(t,e,a){var r=t.map((function(t,a){return 0===t.weight?n.WALL:void 0!==t.prevNode&&e.includes(a)?n.EXPLORING:void 0!==t.prevNode?n.EXPLORED:n.OPEN}));this.pathStepArray.push(r)}}]),e}(w),b=function t(){var e=this;Object(v.a)(this,t),this.heap=void 0,this.getParent=function(t){return Math.floor((t-1)/2)},this.getLeft=function(t){return 2*t+1},this.getRight=function(t){return 2*t+2},this.swap=function(t,a){var n=e.heap[t];e.heap[t]=e.heap[a],e.heap[a]=n},this.isKeyALessThanB=function(t,a){return e.heap[t].key<e.heap[a].key},this.siftDown=function(t){var a=e.heap,n=e.getLeft,r=e.getRight,i=e.isKeyALessThanB,s=e.siftDown,o=e.swap;if(t>=0){var u=n(t),c=r(t);if(a[u]&&a[c]){if(i(u,t)||i(c,t)){var h=i(u,c)?u:c;o(h,t),s(h)}}else a[u]&&i(u,t)?(o(u,t),s(u)):a[c]&&i(c,t)&&(o(c,t),s(c))}},this.insert=function(t,a){var n={key:t,value:a};e.heap.push(n);!function t(a){var n=e.getParent(a);n>=0&&e.heap[n].key>e.heap[a].key&&(e.swap(a,n),t(n))}(e.heap.length-1)},this.extractMin=function(){var t=e.heap,a=e.siftDown,n={key:t[0].key,value:t[0].value};return t[0]=t[t.length-1],t.pop(),a(0),n},this.isEmpty=function(){return!(e.heap.length>0)},this.containsValue=function(t){return e.heap.some((function(e){return e.value===t}))},this.heap=[]},y=function(t){function e(t){var a;Object(v.a)(this,e),(a=Object(m.a)(this,Object(f.a)(e).call(this,t))).endX=void 0,a.endY=void 0,a.getEndXY=function(){var t=Math.floor(a.end/a.columns);return{endX:a.end-t*a.columns,endY:t}},a.getHeuristic=function(t){var e=Math.floor(t/a.columns),n=t-e*a.columns;return Math.abs(a.endY-e)+Math.abs(a.endX-n)};var n=a.getEndXY(),r=n.endX,i=n.endY;return a.endX=r,a.endY=i,a}return Object(A.a)(e,t),Object(g.a)(e,[{key:"calcPath",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=this.start,n=this.end,r=this.nodes,i=this.createNodeArray(r),s=new Set,o=new Array(i.length).fill(1/0);o[a]=0;var u=Object(p.a)(o);u[a]=this.getHeuristic(a);var c=new b;c.insert(this.getHeuristic(a),a);for(var h=function(){var a=c.extractMin().value,r=i[a];if(r.i===n)return t.pathNodeArray=i,{v:t.buildPathArray(i)};s.add(a),t.getNodeNeighbours(r.i).forEach((function(n){if(!s.has(n)&&0!==i[n].weight){var r=o[a]+i[n].weight;r<o[n]&&(i[n].prevNode=a,o[n]=r,u[n]=e?t.getHeuristic(n):r+t.getHeuristic(n),c.insert(u[n],n),t.buildCurrentStep(s,i))}}))};!c.isEmpty();){var d=h();if("object"===typeof d)return d.v}return[]}},{key:"buildCurrentStep",value:function(t,e){var a=e.map((function(e,a){return 0===e.weight?n.WALL:void 0!==e.prevNode&&t.has(a)?n.EXPLORED:void 0!==e.prevNode?n.EXPLORING:n.OPEN}));this.pathStepArray.push(a)}}]),e}(w),_=function(t){function e(t){var a;Object(v.a)(this,e),(a=Object(m.a)(this,Object(f.a)(e).call(this,t))).endX=void 0,a.endY=void 0,a.startX=void 0,a.startY=void 0,a.getXYForIndex=function(t){var e=Math.floor(t/a.columns);return{x:t-e*a.columns,y:e}},a.getHeuristic=function(t,e){var n=Math.floor(t/a.columns),r=t-n*a.columns;return e?Math.abs(a.startY-n)+Math.abs(a.startX-r):Math.abs(a.endY-n)+Math.abs(a.endX-r)},a.doNeighbourCalculations=function(t,e,n,r,i,s,o,u,c){if(!n.has(e)&&0!==r[e].weight){var h=i[t]+r[e].weight;h<i[e]&&(r[e].prevNode=t,i[e]=h,s[e]=u?a.getHeuristic(e,c):h+a.getHeuristic(e,c),o.insert(s[e],e))}};var n=a.getXYForIndex(t.end);a.endX=n.x,a.endY=n.y;var r=a.getXYForIndex(t.start);return a.startX=r.x,a.startY=r.y,a}return Object(A.a)(e,t),Object(g.a)(e,[{key:"calcPath",value:function(){var t=this,e=this.start,a=this.end,n=this.nodes,r=this.createNodeArray(n),i=this.createNodeArray(n),s=new Set,o=new Set,u=new Array(r.length).fill(1/0);u[e]=0,u[a]=0;var c=new Array(i.length).fill(1/0);c[a]=0;var h=Object(p.a)(u);h[e]=this.getHeuristic(e,!1),h[a]=this.getHeuristic(a,!0);var d=Object(p.a)(c);d[a]=this.getHeuristic(a,!0);var l=new b,v=new b;v.insert(h[e],e),l.insert(h[a],a);for(var g=function(){var e=v.extractMin().value,a=l.extractMin().value,n=r[e];if(o.has(n.i)){for(var p=i[n.i].prevNode,g=n.i;void 0!==p&&p>=0;)r[p].prevNode=g,g=p,p=i[p].prevNode;return t.pathNodeArray=r,{v:t.buildPathArray(r)}}o.add(a),s.add(e);var m=t.getNodeNeighbours(e),f=t.getNodeNeighbours(a);m.forEach((function(a){return t.doNeighbourCalculations(e,a,s,r,u,h,v,!1,!1)})),f.forEach((function(e){return t.doNeighbourCalculations(a,e,o,i,c,d,l,!1,!0)})),t.buildCurrentStep(s,r,o,i)};!l.isEmpty()&&!v.isEmpty();){var m=g();if("object"===typeof m)return m.v}return[]}},{key:"buildCurrentStep",value:function(t,e,a,r){var i=e.map((function(e,a){return 0===e.weight?n.WALL:void 0!==e.prevNode&&t.has(a)?n.EXPLORED:void 0!==e.prevNode?n.EXPLORING:n.OPEN}));r.forEach((function(t,e){void 0!==t.prevNode&&a.has(e)&&i[e]===n.OPEN?i[e]=n.EXPLORED:void 0!==t.prevNode&&i[e]===n.OPEN&&(i[e]=n.EXPLORING)})),this.pathStepArray.push(i)}}]),e}(w),O=function(){function t(e,a,n,r,i){var s=this;Object(v.a)(this,t),this.nodes=void 0,this.start=void 0,this.end=void 0,this.rows=void 0,this.columns=void 0,this.path=void 0,this.pathAlgorithm=void 0,this.getDataObject=function(){return{nodes:s.nodes,rows:s.rows,columns:s.columns,start:s.start,end:s.end,path:[]}},this.nodes=e,this.rows=a,this.columns=n,this.start=r,this.end=i,this.path=[],this.pathAlgorithm=new w(this.getDataObject())}return Object(g.a)(t,[{key:"calcPath",value:function(t){var e,a=this.getDataObject();switch(t){case r.ASTAR_GREEDY:e=new y(a),this.path=e.calcPath(!0);break;case r.ASTAR:e=new y(a),this.path=e.calcPath();break;case r.ASTAR_DUAL:e=new _(a),this.path=e.calcPath();break;default:e=new N(a),this.path=e.calcPath()}return this.pathAlgorithm=e,this.path}},{key:"getPathNodes",value:function(){return this.pathAlgorithm.pathNodeArray}},{key:"getPathSteps",value:function(){return this.pathAlgorithm.pathStepArray}},{key:"getPathStepsLength",value:function(){return this.pathAlgorithm.pathStepArray.length}},{key:"getNextPathStep",value:function(){return this.pathAlgorithm.getNextPathStep()}}]),t}(),P=function(t){function e(t){var a;return Object(v.a)(this,e),(a=Object(m.a)(this,Object(f.a)(e).call(this,t))).resetPathState=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=new Array(a.props.rows*a.props.columns).fill(1);e[0]=-1,e[e.length-1]=-2,a.setState({nodes:t?e:a.state.nodes,path:[],pathNodes:[],pathStep:[]})},a.generateGridItems=function(t,e){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.state.nodes,i=[],o=0;o<t;o++)for(var u=0;u<e;u++){var c=o*e+u,h=a.state.pathStep[c];a.state.path.includes(c)&&(h=n.PATH),0===r[c]&&(h=n.WALL),-1===r[c]&&(h=n.START),-2===r[c]&&(h=n.END),i.push(s.a.createElement("div",{className:"item__container--square",key:"ics"+u+"_"+o},s.a.createElement(E,{status:h,key:"gi_"+u+"_"+o,row:o,column:u,weight:r[o*e+u]?r[o*e+u]:0,index:o*e+u,displayWeight:!(e>7&&t>7),onChange:a.onChangeNodeWeight,onMouseEnterGridItem:a.onMouseEnterGridItem,onMouseDownGridItem:a.onMouseDownGridItem,onMouseUpGridItem:a.onMouseUpGridItem,onTouchMove:a.onTouchMoveGridItem,onTouchEnd:a.onTouchEndGridItem})))}return i},a.onChangeNodeWeight=function(t){return function(e){var n=Object(p.a)(a.state.nodes);n[t]=parseInt(e.target.value),a.setState({nodes:n})}},a.setWaitTime=function(t){a.setState((function(e){return{waitTime:t}}))},a.getGridStyles=function(t,e){var n=a.getGridTemplate(e);return Object.assign(n,a.calcGridHeightAndWidth(t,e)),n},a.calcGridHeightAndWidth=function(t,e){var a=100,n=100;return t>e?a=e/t*100:n=t/e*100,{width:a+"%",height:n+"%"}},a.getGridTemplate=function(t){for(var e="",a=0;a<t;a++)e+="1fr ";return{gridTemplateColumns:e}},a.onCalculatePath=function(){if(a.resetPathState(),a.state.nodes.includes(-1)&&a.state.nodes.includes(-2)){var t=new O(a.state.nodes,a.props.rows,a.props.columns,a.state.nodes.indexOf(-1),a.state.nodes.indexOf(-2)),e=t.calcPath(a.state.algorithm),n=t.getPathNodes();a.setState({path:e,pathNodes:n})}},a.onCalculatePathSteps=function(){if(a.resetPathState(),a.state.nodes.includes(-1)&&a.state.nodes.includes(-2)){var t=new O(a.state.nodes,a.props.rows,a.props.columns,a.state.nodes.indexOf(-1),a.state.nodes.indexOf(-2));t.calcPath(a.state.algorithm),a.DisplayPathSteps(t)}},a.wait=function(t){return new Promise((function(e){return setTimeout(e,t)}))},a.onChangeAlgorithm=function(t){a.setState({algorithm:parseInt(t.target.value)})},a.stopDragAt=function(t){if(a.state.dragStartIndex===t&&a.state.dragStartInitialWeight===a.state.nodes[t]){var e=Object(p.a)(a.state.nodes),n=e[t]-1;n<-2?(n=1,e[e.length-1]=-2):-2===n?(e[e.indexOf(-2)]=1,e[0]=-1):-1===n&&(e[e.indexOf(-1)]=1),e[t]=n,a.setState((function(a){return{isDragging:!1,dragEndIndex:t,nodes:e}}))}else a.setState((function(e){return{isDragging:!1,dragEndIndex:t}}))},a.stopDrag=function(){a.setState((function(t){return{isDragging:!1}}))},a.startDragAt=function(t){a.resetPathState(),a.setState((function(e){return{isDragging:!0,dragStartIndex:t,dragStartInitialWeight:a.state.nodes[t],isCreatingWalls:0!==a.state.nodes[t]}}))},a.continueDragAt=function(t){if(a.state.isDragging&&t!==a.state.dragStartIndex&&-1!==a.state.nodes[t]&&-2!==a.state.nodes[t]){var e=Object(p.a)(a.state.nodes);e[t]=a.state.isCreatingWalls?0:1,e[a.state.dragStartIndex]=e[t],a.setState((function(t){return{nodes:e}}))}},a.onMouseDownGridItem=function(t){return function(e){a.startDragAt(t),e.target===e.currentTarget&&e.preventDefault()}},a.onMouseUpGridItem=function(t){return function(e){a.stopDragAt(t)}},a.onMouseEnterGridItem=function(t){return function(e){a.continueDragAt(t)}},a.onMouseExitGrid=function(t){a.stopDrag()},a.onTouchMoveGridItem=function(t){var e=document.elementFromPoint(t.touches[0].clientX,t.touches[0].clientY);if(null!==e){var n=e.getAttribute("data-index");if(null!==n){var r=parseInt(n);!1===a.state.isDragging?a.startDragAt(r):a.continueDragAt(r)}}},a.onTouchEndGridItem=function(t){a.stopDrag()},a.state={nodes:new Array(t.rows*t.columns).fill(1),path:[],algorithm:r.DIJKSTRA,isDragging:!1,isCreatingWalls:!1,dragStartInitialWeight:0,dragStartIndex:0,dragEndIndex:0,pathNodes:[],pathStep:new Array(t.rows*t.columns).fill(n.OPEN),waitTime:5},a.state.pathStep[0]=n.START,a.state.pathStep[a.state.pathStep.length-1]=n.END,a.state.nodes[0]=-1,a.state.nodes[a.state.nodes.length-1]=-2,a}return Object(A.a)(e,t),Object(g.a)(e,[{key:"componentDidUpdate",value:function(t){this.props.columns===t.columns&&this.props.rows===t.rows||this.resetPathState(!0)}},{key:"DisplayPathSteps",value:function(){var t=Object(l.a)(d.a.mark((function t(e){var a,n,r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=e.getPathStepsLength(),n=e.path,r=0;case 3:if(!(r<a)){t.next=10;break}return this.setState({pathStep:e.getNextPathStep()}),t.next=7,this.wait(this.state.waitTime);case 7:r++,t.next=3;break;case 10:this.setState({path:n});case 11:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this,e=this.props,a=e.rows,n=e.columns,i=this.state,o=i.nodes,u=i.waitTime;return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"grid__container",style:this.getGridStyles(a,n),onMouseLeave:this.onMouseExitGrid},this.generateGridItems(a,n,o)),s.a.createElement("div",{className:"grid__flexContainer"},s.a.createElement("div",{className:"flex__innerContainer"},s.a.createElement("button",{id:"calc_path",className:"flex__button",onClick:this.onCalculatePath},"Calculate Path"),s.a.createElement("button",{id:"calc_path_steps",className:"flex__button",onClick:this.onCalculatePathSteps},"Show Path Steps")),s.a.createElement("div",{className:"flex__innerContainer"},s.a.createElement("div",{className:"input__container"},s.a.createElement("label",{htmlFor:"select_algorithm"},"Algorithm:"),s.a.createElement("select",{id:"select_algorithm",className:"input__item",onChange:this.onChangeAlgorithm},s.a.createElement("option",{value:r.DIJKSTRA},"Dijkstra"),s.a.createElement("option",{value:r.ASTAR},"A*"),s.a.createElement("option",{value:r.ASTAR_GREEDY},"A* Greedy"),s.a.createElement("option",{value:r.ASTAR_DUAL},"Dual A*"))),s.a.createElement("div",{className:"input__container"},s.a.createElement("label",{htmlFor:"waitTime"},"Step Delay Time:"),s.a.createElement("input",{id:"waitTime",className:"input__item",type:"number",min:3,value:u,onChange:function(e){return t.setWaitTime(parseInt(e.target.value))}})))))}}]),e}(s.a.Component),D=(a(22),function(){var t=Object(i.useState)(8),e=Object(c.a)(t,2),a=e[0],n=e[1],r=Object(i.useState)(8),o=Object(c.a)(r,2),u=o[0],h=o[1];return s.a.createElement("div",{className:"App"},s.a.createElement("div",{className:"app__container"},s.a.createElement("div",{className:"app__inputContainer"},s.a.createElement("div",{className:"input__container"},s.a.createElement("label",{htmlFor:"rows"},"Rows:"),s.a.createElement("input",{id:"rows",className:"input__item",type:"number",min:3,value:a,onChange:function(t){return parseInt(t.target.value)>0?n(parseInt(t.target.value)):n(1)}})),s.a.createElement("div",{className:"input__container"},s.a.createElement("label",{htmlFor:"columns"},"Columns:"),s.a.createElement("input",{id:"rows",className:"input__item",type:"number",min:3,value:u,onChange:function(t){return parseInt(t.target.value)>0?h(parseInt(t.target.value)):h(1)}}))),s.a.createElement(P,{rows:a,columns:u})))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));u.a.render(s.a.createElement(D,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))}},[[13,1,2]]]);
//# sourceMappingURL=main.c2e8a5d3.chunk.js.map